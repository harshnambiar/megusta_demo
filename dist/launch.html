<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Space Rumble - Me Gusta Gaming</title>
    <link rel="stylesheet" href="main.css">
    <link rel="stylesheet" href="main2.css">
    <link rel="shortcut icon" href="img/megusta-face.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    <script defer="defer" src="./main.js"></script>
    <style>
        /* Define CSS variables for the theme */
        :root {
            --primary: #ff5722;
            --secondary: #ff00e4;
            --accent: #00f2ff;
            --text: #ffffff;
            --text-secondary: #cccccc;
            --darkest: #0a0b15;
            --darker: #141528;
            --dark: #1e2040;
            --gradient-primary: linear-gradient(45deg, #ff5722, #ff9800);
            --gradient-secondary: linear-gradient(45deg, #ff00e4, #9c27b0);
            --font-display: 'Orbitron', sans-serif;
        }

        /* Background glitch effect */
        .background-glitch {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 30% 20%, rgba(255, 0, 228, 0.05), transparent 40%),
                radial-gradient(circle at 70% 60%, rgba(0, 242, 255, 0.05), transparent 40%);
            pointer-events: none;
            z-index: -1;
        }

        /* Game page specific styles */
        .game-interface {
            position: relative;
            width: 100%;
            display: flex;
            justify-content: center;
            padding: 50px 0;
            min-height: 80vh;
            background: var(--darkest);
            overflow: hidden;
        }

        .game-interface::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(255, 0, 228, 0.1), transparent 40%),
                radial-gradient(circle at 90% 80%, rgba(0, 242, 255, 0.1), transparent 40%),
                repeating-linear-gradient(45deg, rgba(255, 0, 228, 0.01) 0px, rgba(255, 0, 228, 0.01) 1px, transparent 1px, transparent 10px),
                repeating-linear-gradient(135deg, rgba(0, 242, 255, 0.01) 0px, rgba(0, 242, 255, 0.01) 1px, transparent 1px, transparent 10px);
            z-index: 1;
        }

        .game-container {
            position: relative;
            display: flex;
            flex-direction: row;
            align-items: flex-start;
            justify-content: center;
            gap: 30px;
            width: 100%;
            max-width: 1400px;
            z-index: 2;
            padding: 0 20px;
        }

        .game-sidebar {
            width: 280px;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .game-title-section {
            text-align: center;
            margin-bottom: 30px;
            position: relative;
        }

        .game-title {
            font-family: var(--font-display);
            font-size: 4rem;
            color: #ff00e4;
            text-transform: uppercase;
            margin: 0;
            text-shadow: 
                0 0 10px rgba(255, 0, 228, 0.8),
                0 0 20px rgba(255, 0, 228, 0.6),
                0 0 30px rgba(255, 0, 228, 0.4),
                0 0 40px rgba(255, 0, 228, 0.2);
            letter-spacing: 4px;
            position: relative;
            display: inline-block;
            animation: neonPulse 1.5s infinite alternate;
        }

        @keyframes neonPulse {
            0% {
                text-shadow: 
                    0 0 10px rgba(255, 0, 228, 0.8),
                    0 0 20px rgba(255, 0, 228, 0.6),
                    0 0 30px rgba(255, 0, 228, 0.4),
                    0 0 40px rgba(255, 0, 228, 0.2);
            }
            100% {
                text-shadow: 
                    0 0 15px rgba(255, 0, 228, 1),
                    0 0 30px rgba(255, 0, 228, 0.8),
                    0 0 45px rgba(255, 0, 228, 0.6),
                    0 0 60px rgba(255, 0, 228, 0.4);
            }
        }

        .game-title::after {
            content: '';
            position: absolute;
            bottom: -15px;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 3px;
            background: var(--gradient-secondary);
            border-radius: 3px;
            box-shadow: 0 0 15px rgba(255, 0, 228, 0.6);
        }

        .game-subtitle {
            color: var(--accent);
            font-size: 1.3rem;
            margin-top: 30px;
            opacity: 0.9;
            font-family: 'Orbitron', sans-serif;
            text-shadow: 0 0 10px rgba(0, 242, 255, 0.5);
            letter-spacing: 1px;
            max-width: 80%;
            margin-left: auto;
            margin-right: auto;
            position: relative;
        }

        .game-subtitle::before,
        .game-subtitle::after {
            content: '';
            position: absolute;
            top: 50%;
            width: 30px;
            height: 1px;
            background: linear-gradient(90deg, transparent, var(--accent), transparent);
        }

        .game-subtitle::before {
            left: -40px;
        }

        .game-subtitle::after {
            right: -40px;
        }

        /* Enhanced game canvas with cyberpunk effects */
        .game-canvas-container {
            position: relative;
            width: 620px;
            height: 620px;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 
                0 0 0 2px rgba(255, 0, 228, 0.5),
                0 0 0 4px rgba(10, 11, 21, 0.8),
                0 0 20px rgba(255, 0, 228, 0.5),
                0 0 40px rgba(0, 242, 255, 0.3),
                0 10px 50px rgba(0, 0, 0, 0.8);
            background-color: #000;
            transform: perspective(1000px) rotateX(2deg);
            transition: all 0.5s cubic-bezier(0.2, 0.8, 0.2, 1);
        }

        .game-canvas-container:hover {
            transform: perspective(1000px) rotateX(0);
            box-shadow: 
                0 0 0 2px rgba(255, 0, 228, 0.7),
                0 0 0 4px rgba(10, 11, 21, 0.8),
                0 0 30px rgba(255, 0, 228, 0.7),
                0 0 60px rgba(0, 242, 255, 0.5),
                0 20px 60px rgba(0, 0, 0, 0.9);
        }

        .game-canvas-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(255, 0, 228, 0.15), transparent 70%);
            z-index: 10;
            pointer-events: none;
            border-radius: 8px;
        }

        .game-canvas-container::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, transparent, rgba(255, 0, 228, 0.8), rgba(0, 242, 255, 0.8), transparent);
            z-index: 11;
            animation: scanline 3s linear infinite;
            opacity: 0.7;
        }

        @keyframes scanline {
            0% { top: -5px; opacity: 0.7; }
            50% { opacity: 0.3; }
            100% { top: 100%; opacity: 0.7; }
        }

        canvas#game {
            display: block;
            width: 100%;
            height: 100%;
            z-index: 5;
        }

        /* Enhanced game controls */
        .game-control-button {
            width: 100%;
            padding: 15px 20px;
            background: rgba(10, 11, 21, 0.8);
            border: none;
            border-radius: 8px;
            color: var(--text);
            font-family: var(--font-display);
            font-size: 1.3rem;
            letter-spacing: 2px;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            text-decoration: none;
            text-transform: uppercase;
            transition: all 0.3s cubic-bezier(0.2, 0.8, 0.2, 1);
            box-shadow: 
                0 0 0 1px rgba(255, 0, 228, 0.3),
                0 4px 10px rgba(0, 0, 0, 0.5);
        }

        .game-control-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(255, 0, 228, 0.2), rgba(0, 242, 255, 0.2));
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .game-control-button::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(
                to right,
                transparent,
                rgba(255, 255, 255, 0.1),
                transparent
            );
            transform: rotate(45deg);
            transition: all 0.5s ease;
            opacity: 0;
        }

        .game-control-button i {
            margin-right: 10px;
            font-size: 1.3rem;
            color: var(--secondary);
            position: relative;
            z-index: 2;
            transition: all 0.3s ease;
        }

        .game-control-button:hover {
            transform: translateY(-3px);
            box-shadow: 
                0 0 0 2px rgba(255, 0, 228, 0.5),
                0 8px 20px rgba(0, 0, 0, 0.7),
                0 0 15px rgba(255, 0, 228, 0.5);
            letter-spacing: 3px;
            color: #fff;
        }

        .game-control-button:hover::before {
            opacity: 1;
        }

        .game-control-button:hover::after {
            opacity: 1;
            animation: shine 1.5s forwards;
        }

        .game-control-button:hover i {
            transform: scale(1.2) rotate(-10deg);
            color: var(--accent);
        }

        .play-btn {
            background: linear-gradient(135deg, rgba(255, 0, 228, 0.8), rgba(255, 87, 34, 0.8));
            color: white;
            text-shadow: 0 0 5px rgba(0, 0, 0, 0.5);
            border: none;
            box-shadow: 
                0 0 0 2px rgba(255, 0, 228, 0.3),
                0 8px 20px rgba(0, 0, 0, 0.7),
                0 0 15px rgba(255, 0, 228, 0.5);
        }

        .play-btn i {
            color: white;
        }

        .play-btn:hover {
            background: linear-gradient(135deg, rgba(255, 0, 228, 1), rgba(255, 87, 34, 1));
            box-shadow: 
                0 0 0 2px rgba(255, 0, 228, 0.5),
                0 8px 25px rgba(0, 0, 0, 0.8),
                0 0 20px rgba(255, 0, 228, 0.7);
        }

        .game-info-card {
            background: rgba(10, 11, 21, 0.8);
            border: 2px solid rgba(0, 242, 255, 0.2);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            margin-bottom: 20px;
        }

        .game-info-card-title {
            font-family: var(--font-display);
            font-size: 1.5rem;
            color: var(--accent);
            margin-top: 0;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
        }

        .game-info-card-title i {
            margin-right: 10px;
            color: var(--accent);
        }

        .game-info-content {
            color: var(--text-secondary);
            font-size: 1rem;
            line-height: 1.6;
            margin: 0;
        }

        .game-info-list {
            list-style: none;
            padding: 0;
            margin: 10px 0 0;
        }

        .game-info-list li {
            padding: 8px 0;
            display: flex;
            align-items: center;
            border-bottom: 1px dashed rgba(0, 242, 255, 0.2);
        }

        .game-info-list li:last-child {
            border-bottom: none;
        }

        .game-info-list li::before {
            content: '→';
            color: var(--accent);
            margin-right: 10px;
            font-weight: bold;
        }

        .rewards-value {
            color: #FFD700;
            font-weight: bold;
            text-shadow: 0 0 5px rgba(255, 215, 0, 0.5);
        }

        .game-status {
            position: absolute;
            top: 15px;
            left: 15px;
            background: rgba(10, 11, 21, 0.8);
            padding: 8px 15px;
            border-radius: 30px;
            color: var(--secondary);
            font-size: 0.9rem;
            font-weight: bold;
            z-index: 20;
            display: flex;
            align-items: center;
            gap: 8px;
            border: 1px solid var(--secondary);
            box-shadow: 0 0 15px rgba(255, 0, 228, 0.4);
            backdrop-filter: blur(5px);
        }

        .game-status i {
            color: #00ff66;
            animation: pulse 2s infinite;
        }

        .game-hud {
            position: absolute;
            bottom: 15px;
            left: 15px;
            right: 15px;
            display: flex;
            justify-content: space-between;
            z-index: 20;
        }

        .game-score-display {
            background: rgba(10, 11, 21, 0.8);
            padding: 8px 15px;
            border-radius: 30px;
            color: var(--text);
            font-size: 0.9rem;
            font-weight: bold;
            border: 1px solid var(--secondary);
            box-shadow: 0 0 15px rgba(255, 0, 228, 0.4);
            backdrop-filter: blur(5px);
        }

        .game-health-display {
            display: flex;
            gap: 5px;
        }

        .health-unit {
            width: 20px;
            height: 20px;
            background: var(--secondary);
            border-radius: 4px;
            box-shadow: 0 0 10px rgba(255, 0, 228, 0.6);
        }

        .game-controls-display {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(10, 11, 21, 0.95);
            padding: 30px;
            border-radius: 20px;
            color: var(--text);
            text-align: center;
            z-index: 30;
            width: 80%;
            max-width: 400px;
            border: 2px solid var(--secondary);
            box-shadow: 0 0 40px rgba(0, 0, 0, 0.8), 0 0 30px rgba(255, 0, 228, 0.4);
            backdrop-filter: blur(10px);
            display: none;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .game-controls-display.visible {
            display: block;
            opacity: 1;
        }

        .controls-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 20px;
        }

        .control-item {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .key {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid var(--secondary);
            border-radius: 5px;
            padding: 5px 10px;
            font-family: monospace;
            font-weight: bold;
            color: var(--secondary);
            min-width: 30px;
            text-align: center;
        }

        @keyframes pulse {
            0% { opacity: 0.6; }
            50% { opacity: 1; }
            100% { opacity: 0.6; }
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translate(-50%, -50%) scale(0.9); }
            to { opacity: 1; transform: translate(-50%, -50%) scale(1); }
        }

        .player-ship-icon {
            position: absolute;
            bottom: 15px;
            right: 15px;
            width: 100px;
            height: 100px;
            background-image: url('img/spaceship.png');
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
            z-index: 20;
            filter: drop-shadow(0 0 10px rgba(0, 242, 255, 0.6));
            opacity: 0.6;
            pointer-events: none;
        }

        .game-stats {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .game-stat-item {
            flex: 1;
            background: rgba(10, 11, 21, 0.6);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            border: 1px solid rgba(0, 242, 255, 0.1);
        }

        .game-stat-value {
            font-size: 1.8rem;
            font-weight: bold;
            color: var(--accent);
            margin: 0;
            line-height: 1;
        }

        .game-stat-label {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-top: 5px;
        }

        .top-scores {
            max-height: 200px;
            overflow-y: auto;
            padding-right: 10px;
            margin-top: 15px;
        }

        .top-scores::-webkit-scrollbar {
            width: 5px;
        }

        .top-scores::-webkit-scrollbar-track {
            background: rgba(10, 11, 21, 0.4);
            border-radius: 10px;
        }

        .top-scores::-webkit-scrollbar-thumb {
            background: var(--accent);
            border-radius: 10px;
        }

        .score-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px dashed rgba(0, 242, 255, 0.1);
        }

        .score-rank {
            font-weight: bold;
            color: var(--accent);
            width: 30px;
        }

        .score-name {
            flex: 1;
            color: var(--text);
        }

        .score-value {
            font-weight: bold;
            color: #FFD700;
        }

        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
            z-index: 100;
            display: none;
            justify-content: center;
            align-items: center;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .overlay.active {
            opacity: 1;
        }

        .overlay-content {
            background: rgba(10, 11, 21, 0.9);
            border: 2px solid var(--accent);
            border-radius: 20px;
            width: 90%;
            max-width: 600px;
            padding: 40px;
            position: relative;
            box-shadow: 0 0 50px rgba(0, 242, 255, 0.5);
            transform: translateY(-20px);
            transition: transform 0.3s ease;
        }

        .overlay.active .overlay-content {
            transform: translateY(0);
        }

        .overlay-close {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            color: var(--text);
            font-size: 1.5rem;
            cursor: pointer;
        }

        .overlay-title {
            font-family: var(--font-display);
            font-size: 2rem;
            color: var(--accent);
            margin-top: 0;
            margin-bottom: 20px;
            text-align: center;
        }

        @media (max-width: 1200px) {
            .game-container {
                flex-direction: column;
                align-items: center;
            }

            .game-sidebar {
                width: 100%;
                max-width: 620px;
                flex-direction: row;
                flex-wrap: wrap;
                justify-content: center;
                margin-top: 30px;
            }

            .game-control-container {
                width: 48%;
                display: flex;
            }
            
            .game-info-card {
                width: 48%;
            }
        }

        @media (max-width: 768px) {
            .game-canvas-container {
                width: 100%;
                height: auto;
                aspect-ratio: 1/1;
            }
            
            .game-title {
                font-size: 2.8rem;
            }
            
            .game-control-container {
                width: 100%;
            }
            
            .game-info-card {
                width: 100%;
            }
        }

        @media (max-width: 576px) {
            .game-title {
                font-size: 2.2rem;
            }
            
            .game-subtitle {
                font-size: 1rem;
            }
            
            .game-control-button {
                font-size: 1.1rem;
                padding: 15px;
            }
            
            .overlay-content {
                padding: 30px 20px;
            }
            
            .overlay-title {
                font-size: 1.8rem;
            }
        }

        /* Footer styles fix */
        .footer-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 30px 50px;
            background-color: rgba(10, 11, 21, 0.9);
            border-top: 1px solid rgba(0, 242, 255, 0.2);
        }
        
        .footer-left {
            display: flex;
            align-items: center;
        }
        
        .footer-logo {
            width: 40px;
            height: 40px;
            margin-right: 15px;
        }
        
        .footer-left p {
            color: #cccccc;
            font-size: 0.9rem;
            margin: 0;
        }
        
        .footer-right {
            display: flex;
            gap: 20px;
        }
        
        .footer-right a {
            color: #cccccc;
            text-decoration: none;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }
        
        .footer-right a:hover {
            color: #ff00e4;
            text-shadow: 0 0 10px rgba(255, 0, 228, 0.5);
        }
        
        @media (max-width: 768px) {
            .footer-container {
                flex-direction: column;
                gap: 20px;
                text-align: center;
                padding: 20px;
            }
            
            .footer-left {
                flex-direction: column;
            }
            
            .footer-logo {
                margin-right: 0;
                margin-bottom: 10px;
            }
        }
    </style>
    <style>
        /* Additional styles for fixing visibility issues */
        body {
            background-color: #0a0b15;
            color: #ffffff;
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
        }
        
        .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 2rem;
            background-color: rgba(10, 11, 21, 0.9);
            position: sticky;
            top: 0;
            z-index: 100;
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255, 0, 228, 0.2);
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.5);
        }
        
        .nav-links {
            display: flex;
            list-style: none;
            margin: 0;
            padding: 0;
        }
        
        .nav-item {
            margin: 0 5px;
            position: relative;
        }
        
        .nav-item a {
            color: white;
            text-decoration: none;
            font-weight: bold;
            font-family: var(--font-display);
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 10px 15px;
            transition: all 0.3s ease;
            border-radius: 8px;
            background: rgba(20, 21, 40, 0.4);
            border: 1px solid transparent;
        }
        
        .nav-item a:hover, .nav-item a.active {
            background: linear-gradient(135deg, rgba(255, 0, 228, 0.2), rgba(0, 242, 255, 0.2));
            border: 1px solid rgba(255, 0, 228, 0.4);
            box-shadow: 
                0 0 10px rgba(255, 0, 228, 0.3),
                0 0 20px rgba(255, 0, 228, 0.1);
            transform: translateY(-2px);
        }
        
        .nav-item a.active {
            background: linear-gradient(135deg, rgba(255, 0, 228, 0.3), rgba(0, 242, 255, 0.3));
            border: 1px solid rgba(255, 0, 228, 0.6);
        }
        
        .nav-icon {
            margin-bottom: 5px;
            font-size: 1.2rem;
            color: var(--secondary);
            transition: all 0.3s ease;
        }
        
        .nav-text {
            font-size: 0.8rem;
            letter-spacing: 1px;
        }
        
        .nav-item a:hover .nav-icon, .nav-item a.active .nav-icon {
            transform: scale(1.2);
            color: var(--accent);
        }
        
        .chain-selector {
            position: relative;
            margin-right: 20px;
        }
        
        .chain-selector select {
            background-color: rgba(30, 32, 64, 0.8);
            color: white;
            border: 1px solid rgba(0, 242, 255, 0.5);
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            appearance: none;
            padding-right: 30px;
        }
        
        .wallet-connector {
            position: relative;
            cursor: pointer;
            width: 40px;
            height: 40px;
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 50%;
            background-color: rgba(30, 32, 64, 0.8);
            border: 1px solid rgba(255, 0, 228, 0.5);
            transition: all 0.3s ease;
            box-shadow: 0 0 10px rgba(255, 0, 228, 0.3);
        }
        
        .wallet-connector:hover {
            box-shadow: 0 0 20px rgba(255, 0, 228, 0.5);
            transform: scale(1.05);
        }
        
        .wallet-icon {
            width: 24px;
            height: 24px;
            filter: invert(1);
        }
        
        .logo-container {
            display: flex;
            align-items: center;
            position: relative;
        }
        
        .logo {
            width: 50px;
            height: 50px;
            position: relative;
            z-index: 2;
        }
        
        .logo-glow {
            position: absolute;
            width: 70px;
            height: 70px;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(255, 0, 228, 0.5) 0%, transparent 70%);
            animation: pulse 2s infinite;
            z-index: 1;
        }
        
        .nav-right, .nav-center, .nav-left {
            display: flex;
            align-items: center;
        }
        
        .menu-toggle {
            display: none;
        }
        
        @media (max-width: 768px) {
            .nav-center {
                position: fixed;
                top: 70px;
                left: 0;
                width: 100%;
                background-color: rgba(20, 21, 40, 0.95);
                flex-direction: column;
                padding: 20px 0;
                transform: translateY(-100%);
                transition: transform 0.3s ease;
                z-index: 9;
            }
            
            .nav-center.nav-active {
                transform: translateY(0);
            }
            
            .nav-item {
                margin: 10px 0;
            }
            
            .menu-toggle {
                display: block;
                cursor: pointer;
            }
            
            .hamburger span {
                display: block;
                width: 25px;
                height: 3px;
                background-color: white;
                margin: 5px 0;
                transition: all 0.3s ease;
            }
            
            .menu-toggle.active .hamburger span:nth-child(1) {
                transform: rotate(-45deg) translate(-5px, 6px);
            }
            
            .menu-toggle.active .hamburger span:nth-child(2) {
                opacity: 0;
            }
            
            .menu-toggle.active .hamburger span:nth-child(3) {
                transform: rotate(45deg) translate(-5px, -6px);
            }
        }
    </style>
</head>

<body id="bod">
    <div class="background-glitch"></div>

    <header>
        <nav class="navbar">
            <div class="nav-left">
                <a href="index.html" class="logo-container">
                    <div class="logo-glow"></div>
                    <img src="img/megusta-face.png" alt="Me Gusta Logo" class="logo">
                </a>
            </div>

            <div class="nav-center">
                <ul class="nav-links">
                    <li class="nav-item">
                        <a href="about.html">
                            <span class="nav-icon"><i class="fas fa-info-circle"></i></span>
                            <span class="nav-text">ABOUT</span>
                        </a>
                    </li>
                    <li class="nav-item" id="gli">
                        <a href="games.html" class="active">
                            <span class="nav-icon"><i class="fas fa-gamepad"></i></span>
                            <span class="nav-text">DEMO</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="faqs.html">
                            <span class="nav-icon"><i class="fas fa-question-circle"></i></span>
                            <span class="nav-text">FAQS</span>
                        </a>
                    </li>
                </ul>
            </div>

            <div id="nright" class="nav-right">
                <div class="chain-selector">
                    <select name="typc" id="chain_name">
                        <option value="current">Select Chain</option>
                        <option value="eth">Ethereum</option>
                        <option value="mnt">Mantle</option>
                        <option value="lsk">Lisk</option>
                        <option value="flr">Flare</option>
                        <option value="gvt">Gravity</option>
                    </select>
                    <div class="chain-indicator"></div>
                </div>
                <div class="wallet-connector">
                    <div class="wallet-pulse"></div>
                    <img src="img/wallet-icon.svg" alt="Wallet" class="wallet-icon" onclick="connect();">
                </div>
            </div>

            <div class="menu-toggle" id="mobile-menu">
                <div class="hamburger">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </div>
        </nav>
    </header>

    <main>
        <section class="game-interface">
            <div class="game-container">
                <div class="game-title-section">
                    <h1 class="game-title" id="game_title">SPACE RUMBLE</h1>
                    <p class="game-subtitle">Navigate through asteroid fields and enemy attacks in this action-packed arcade game</p>
                </div>
                
                <div class="game-canvas-container">
                    <div class="game-status"><i class="fas fa-signal"></i> Live Tournament</div>
                    <canvas id="game" width="620" height="620"></canvas>
                    <div class="game-hud">
                        <div class="game-score-display">Score: <span id="score">0</span></div>
                        <div class="game-health-display">
                            <div class="health-unit"></div>
                            <div class="health-unit"></div>
                            <div class="health-unit"></div>
                        </div>
                    </div>
                    <div class="player-ship-icon"></div>
                    <div class="game-controls-display" id="controls-display">
                        <h3>Game Controls</h3>
                        <div class="controls-grid">
                            <div class="control-item">
                                <div class="key">W</div>
                                <span>Move Up</span>
                            </div>
                            <div class="control-item">
                                <div class="key">S</div>
                                <span>Move Down</span>
                            </div>
                            <div class="control-item">
                                <div class="key">A</div>
                                <span>Move Left</span>
                            </div>
                            <div class="control-item">
                                <div class="key">D</div>
                                <span>Move Right</span>
                            </div>
                            <div class="control-item">
                                <div class="key">Space</div>
                                <span>Fire</span>
                            </div>
                            <div class="control-item">
                                <div class="key">P</div>
                                <span>Pause</span>
                            </div>
                        </div>
                        <button class="game-control-button" style="margin-top: 20px; width: auto; padding: 10px 20px;" onclick="hideControlsDisplay()">
                            Got it!
                        </button>
                    </div>
                </div>
                
                <div class="game-sidebar">
                    <div class="game-control-container">
                        <button class="game-control-button play-btn" onclick="playGame()">
                            <i class="fas fa-play"></i> Play!
                        </button>
                    </div>
                    
                    <div class="game-control-container">
                        <button class="game-control-button" onclick="retryGame()">
                            <i class="fas fa-redo"></i> Retry
                        </button>
                    </div>
                    
                    <div class="game-control-container">
                        <button class="game-control-button" onclick="showRules()">
                            <i class="fas fa-book"></i> Rules
                        </button>
                    </div>
                    
                    <div class="game-control-container">
                        <button class="game-control-button" onclick="showScores()">
                            <i class="fas fa-trophy"></i> Scores
                        </button>
                    </div>
                    
                    <div class="game-info-card">
                        <h3 class="game-info-card-title">
                            <i class="fas fa-info-circle"></i> Game Info
                        </h3>
                        <p class="game-info-content">
                            Space Rumble is an arcade-style game where you navigate your spaceship through dangerous asteroid fields and enemy attacks.
                        </p>
                        <ul class="game-info-list">
                            <li>Current tournament pot: <span class="rewards-value">2,500 GUSTA</span></li>
                            <li>Entry fee: <span class="rewards-value">25 GUSTA</span></li>
                            <li>Top score reward: <span class="rewards-value">500 GUSTA</span></li>
                        </ul>
                    </div>
                    
                    <div class="game-info-card">
                        <h3 class="game-info-card-title">
                            <i class="fas fa-trophy"></i> Top Scores
                        </h3>
                        <div class="top-scores">
                            <div class="score-item">
                                <span class="score-rank">1.</span>
                                <span class="score-name">CryptoGamer</span>
                                <span class="score-value">15,245</span>
                            </div>
                            <div class="score-item">
                                <span class="score-rank">2.</span>
                                <span class="score-name">Web3Master</span>
                                <span class="score-value">14,382</span>
                            </div>
                            <div class="score-item">
                                <span class="score-rank">3.</span>
                                <span class="score-name">SpaceRider</span>
                                <span class="score-value">13,750</span>
                            </div>
                            <div class="score-item">
                                <span class="score-rank">4.</span>
                                <span class="score-name">BlockchainPro</span>
                                <span class="score-value">12,921</span>
                            </div>
                            <div class="score-item">
                                <span class="score-rank">5.</span>
                                <span class="score-name">GalaxyExplorer</span>
                                <span class="score-value">11,843</span>
                            </div>
                        </div>
                        
                        <div class="game-stats">
                            <div class="game-stat-item">
                                <p class="game-stat-value">42</p>
                                <p class="game-stat-label">PLAYERS</p>
                            </div>
                            <div class="game-stat-item">
                                <p class="game-stat-value">4:32</p>
                                <p class="game-stat-label">TIME LEFT</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Rules Overlay -->
    <div class="overlay" id="rules-overlay">
        <div class="overlay-content">
            <button class="overlay-close" onclick="hideOverlays()">
                <i class="fas fa-times"></i>
            </button>
            <h2 class="overlay-title">Game Rules</h2>
            <div class="game-info-content">
                <p><strong>Objective:</strong> Navigate your spaceship through asteroid fields while destroying enemies to get the highest score possible.</p>
                
                <ul class="game-info-list">
                    <li>Use arrow keys or WASD to move your spaceship</li>
                    <li>Press Spacebar to shoot at enemies and asteroids</li>
                    <li>Collect power-ups to enhance your weapons and defenses</li>
                    <li>Avoid collisions with asteroids and enemy fire</li>
                    <li>Score points by destroying enemies and surviving longer</li>
                    <li>The game ends when your ship is destroyed</li>
                </ul>
                
                <p><strong>Scoring:</strong></p>
                <ul class="game-info-list">
                    <li>Small Asteroid: 10 points</li>
                    <li>Large Asteroid: 20 points</li>
                    <li>Enemy Ship: 50 points</li>
                    <li>Boss Ship: 500 points</li>
                    <li>Survival Bonus: +5 points per second</li>
                </ul>
            </div>
        </div>
    </div>

    <!-- Scores Overlay -->
    <div class="overlay" id="scores-overlay">
        <div class="overlay-content">
            <button class="overlay-close" onclick="hideOverlays()">
                <i class="fas fa-times"></i>
            </button>
            <h2 class="overlay-title">Leaderboard</h2>
            <div class="game-info-content">
                <div class="top-scores">
                    <div class="score-item">
                        <span class="score-rank">1.</span>
                        <span class="score-name">CryptoGamer</span>
                        <span class="score-value">15,245</span>
                    </div>
                    <div class="score-item">
                        <span class="score-rank">2.</span>
                        <span class="score-name">Web3Master</span>
                        <span class="score-value">14,382</span>
                    </div>
                    <div class="score-item">
                        <span class="score-rank">3.</span>
                        <span class="score-name">SpaceRider</span>
                        <span class="score-value">13,750</span>
                    </div>
                    <div class="score-item">
                        <span class="score-rank">4.</span>
                        <span class="score-name">BlockchainPro</span>
                        <span class="score-value">12,921</span>
                    </div>
                    <div class="score-item">
                        <span class="score-rank">5.</span>
                        <span class="score-name">GalaxyExplorer</span>
                        <span class="score-value">11,843</span>
                    </div>
                    <div class="score-item">
                        <span class="score-rank">6.</span>
                        <span class="score-name">CosmicRacer</span>
                        <span class="score-value">10,752</span>
                    </div>
                    <div class="score-item">
                        <span class="score-rank">7.</span>
                        <span class="score-name">AsteroidHunter</span>
                        <span class="score-value">9,841</span>
                    </div>
                    <div class="score-item">
                        <span class="score-rank">8.</span>
                        <span class="score-name">StarWarrior</span>
                        <span class="score-value">9,237</span>
                    </div>
                    <div class="score-item">
                        <span class="score-rank">9.</span>
                        <span class="score-name">GalacticPilot</span>
                        <span class="score-value">8,456</span>
                    </div>
                    <div class="score-item">
                        <span class="score-rank">10.</span>
                        <span class="score-name">NebulaNinja</span>
                        <span class="score-value">7,642</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer>
        <div class="footer-container">
            <div class="footer-left">
                <img src="img/megusta-face.png" alt="Me Gusta Logo" class="footer-logo">
                <p>&copy; 2025 Megusta Gaming by Darksun Labs | All Rights Reserved</p>
            </div>
            <div class="footer-right">
                <a href="about.html">About</a>
                <a href="games.html">Demo</a>
                <a href="#">Discord</a>
                <a href="#">Twitter</a>
            </div>
        </div>
    </footer>

    <script>
        // Mobile menu toggle
        document.getElementById("mobile-menu").addEventListener("click", function () {
            document.querySelector(".nav-center").classList.toggle("nav-active");
            this.classList.toggle("active");
        });

        // Add scroll effect to header
        window.addEventListener("scroll", function() {
            const header = document.querySelector("header");
            if (window.scrollY > 50) {
                header.classList.add("scrolled");
            } else {
                header.classList.remove("scrolled");
            }
        });

        // Game specific functions
        function showControlsDisplay() {
            document.getElementById('controls-display').classList.add('visible');
        }
        
        function hideControlsDisplay() {
            document.getElementById('controls-display').classList.remove('visible');
            // Start the game after hiding the controls
            if (typeof preloadRun === 'function' && window.playerImage) {
                preloadRun();
            }
        }
        
        function playGame() {
            // Show controls first, then start game when user clicks "Got it"
            showControlsDisplay();
            // Game will start when user clicks "Got it" in hideControlsDisplay function
        }
        
        function retryGame() {
            // Game retry logic
            if (typeof restartRun === 'function') {
                restartRun();
            } else {
                console.log("Retrying game...");
                window.location.reload();
            }
        }
        
        function showRules() {
            const overlay = document.getElementById('rules-overlay');
            overlay.style.display = 'flex';
            // Trigger reflow to ensure transition works
            overlay.offsetHeight;
            overlay.classList.add('active');
        }
        
        function showScores() {
            const overlay = document.getElementById('scores-overlay');
            overlay.style.display = 'flex';
            // Trigger reflow to ensure transition works
            overlay.offsetHeight;
            overlay.classList.add('active');
        }
        
        function hideOverlays() {
            const overlays = document.querySelectorAll('.overlay');
            overlays.forEach(overlay => {
                overlay.classList.remove('active');
                // Wait for transition to complete before hiding
                setTimeout(() => {
                    overlay.style.display = 'none';
                }, 300);
            });
        }
        
        // Initialize game
        document.addEventListener('DOMContentLoaded', function() {
            // Fix the controls display
            document.getElementById('rules-overlay').style.display = 'none';
            document.getElementById('scores-overlay').style.display = 'none';
            
            // Initialize game images with proper error handling
            function loadImage(src) {
                return new Promise((resolve, reject) => {
                    const img = new Image();
                    img.onload = () => resolve(img);
                    img.onerror = () => {
                        console.error(`Failed to load image: ${src}`);
                        // Create a fallback colored rectangle
                        const canvas = document.createElement('canvas');
                        canvas.width = 50;
                        canvas.height = 50;
                        const ctx = canvas.getContext('2d');
                        ctx.fillStyle = src.includes('spaceship') ? '#ff00e4' : 
                                       src.includes('asteroid') ? '#ff5722' : '#00f2ff';
                        ctx.fillRect(0, 0, 50, 50);
                        
                        const img = new Image();
                        img.src = canvas.toDataURL();
                        resolve(img);
                    };
                    img.src = src;
                });
            }
            
            // Initialize the canvas and game variables
            window.canvas3 = document.getElementById('game');
            window.ctx3 = canvas3.getContext('2d');
            
            // Set up initial game state
            window.playerX = 50;
            window.playerY = canvas3.height / 2 - 25;
            window.obstacles = [];
            window.exps = [];
            window.scoreRun = 0;
            window.obstacleSpeed = 5;
            window.expSpeed = 3;
            window.lastLoop = 0;
            window.usize = 50;
            window.ongoingRun = false;
            window.pendingScoreRun = false;
            window.armorOn = false;
            window.armorStart = 0;
            window.armorLeft = 1;
            window.armorLevel = 1000;
            window.expOn = false;
            window.lastExp = Date.now();
            
            // Initialize images
            Promise.all([
                loadImage('img/spaceship.png'),
                loadImage('img/asteroid1.png'),
                loadImage('img/asteroid2.png'),
                loadImage('img/coin.png')
            ]).then(([playerImg, obstacle1Img, obstacle2Img, expImg]) => {
                window.playerImage = playerImg;
                window.obstacle1Image = obstacle1Img;
                window.obstacle2Image = obstacle2Img;
                window.expImage = expImg;
                
                // Show the initial game screen
                window.clearScreen2();
                ctx3.fillStyle = 'white';
                ctx3.font = '24px Orbitron';
                ctx3.textAlign = 'center';
                ctx3.fillText('SPACE RUMBLE', canvas3.width/2, canvas3.height/2 - 50);
                ctx3.font = '18px Arial';
                ctx3.fillText('Click PLAY to start the game!', canvas3.width/2, canvas3.height/2);
                ctx3.drawImage(playerImage, canvas3.width/2 - 25, canvas3.height/2 + 30, 50, 50);
            });
            
            // Add keyboard event listeners
            window.addEventListener('keydown', function(e) {
                if (ongoingRun) {
                    if (e.key === 'ArrowUp' || e.key === 'w') {
                        playerY = Math.max(0, playerY - 20);
                    } else if (e.key === 'ArrowDown' || e.key === 's') {
                        playerY = Math.min(canvas3.height - 50, playerY + 20);
                    } else if (e.key === 'ArrowLeft' || e.key === 'a') {
                        playerX = Math.max(0, playerX - 20);
                    } else if (e.key === 'ArrowRight' || e.key === 'd') {
                        playerX = Math.min(canvas3.width - 75, playerX + 20);
                    } else if (e.key === ' ') {
                        // Fire function (not implemented in this version)
                    } else if (e.key === 'Enter' && pendingScoreRun) {
                        // Record score (not implemented in this version)
                    }
                }
            });
            
            // Define missing functions
            window.clearScreen2 = function() {
                ctx3.fillStyle = 'black';
                ctx3.fillRect(0, 0, canvas3.width, canvas3.height);
                
                // Add starfield effect
                ctx3.fillStyle = 'white';
                for (let i = 0; i < 100; i++) {
                    const x = Math.random() * canvas3.width;
                    const y = Math.random() * canvas3.height;
                    const size = Math.random() * 2;
                    ctx3.beginPath();
                    ctx3.arc(x, y, size, 0, Math.PI * 2);
                    ctx3.fill();
                }
            };
            
            window.checkCollisionRun = function(x1, y1, w1, h1, x2, y2, w2, h2) {
                return x1 < x2 + w2 &&
                       x1 + w1 > x2 &&
                       y1 < y2 + h2 &&
                       y1 + h1 > y2;
            };
            
            // Update score display
            setInterval(function() {
                if (window.scoreRun !== undefined) {
                    document.getElementById('score').textContent = scoreRun;
                }
            }, 100);
        });

        // Wallet connection functionality (copied from index.html)
        let currentAccount = null;
        const walletConnector = document.querySelector('.wallet-connector');
        const chainSelect = document.getElementById('chain_name');

        // Function to check if MetaMask is installed
        const isMetaMaskInstalled = () => {
            return typeof window.ethereum !== 'undefined' && window.ethereum.isMetaMask;
        };

        // Show wallet status visually
        const updateWalletStatus = (connected) => {
            if (connected) {
                walletConnector.classList.add('connected');
                walletConnector.setAttribute('title', 'Connected: ' + currentAccount.substring(0, 6) + '...' + currentAccount.substring(38));
            } else {
                walletConnector.classList.remove('connected');
                walletConnector.setAttribute('title', 'Connect Wallet');
            }
        };

        // Connect wallet function
        async function connect() {
            if (!isMetaMaskInstalled()) {
                alert("MetaMask is not installed. Please install MetaMask to use this feature.");
                return;
            }
            
            try {
                // Request account access
                const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });
                
                if (accounts.length === 0) {
                    console.log('No accounts found');
                    return;
                }
                
                currentAccount = accounts[0];
                updateWalletStatus(true);
                console.log('Connected to wallet:', currentAccount);
                
                // Setup account changed event
                window.ethereum.on('accountsChanged', handleAccountsChanged);
                
                // Get current chain
                const chainId = await window.ethereum.request({ method: 'eth_chainId' });
                handleChainChanged(chainId);
                
                // Setup chain changed event
                window.ethereum.on('chainChanged', handleChainChanged);
                
                return true;
            } catch (error) {
                if (error.code === 4001) {
                    // User rejected the request
                    console.log('User rejected the connection request');
                } else {
                    console.error('Error connecting to MetaMask:', error);
                }
                updateWalletStatus(false);
                return false;
            }
        }

        // Handle account changes
        function handleAccountsChanged(accounts) {
            if (accounts.length === 0) {
                console.log('Please connect to MetaMask.');
                currentAccount = null;
                updateWalletStatus(false);
            } else if (accounts[0] !== currentAccount) {
                currentAccount = accounts[0];
                updateWalletStatus(true);
                console.log('Account changed to:', currentAccount);
            }
        }

        // Handle chain changes
        function handleChainChanged(chainId) {
            console.log('Chain changed to:', chainId);
            // Update UI based on chain
            let selectedOption;
            
            switch(chainId) {
                case '0x1': selectedOption = 'eth'; break; // Ethereum Mainnet
                case '0x1388': selectedOption = 'mnt'; break; // Mantle
                case '0x9AF': selectedOption = 'lsk'; break; // Lisk
                case '0xE': selectedOption = 'flr'; break; // Flare
                case '0x79F': selectedOption = 'gvt'; break; // Gravity
                default: selectedOption = 'current';
            }
            
            chainSelect.value = selectedOption;
        }

        // Check if already connected on page load
        window.addEventListener('load', async () => {
            if (isMetaMaskInstalled()) {
                try {
                    const accounts = await window.ethereum.request({ method: 'eth_accounts' });
                    if (accounts.length > 0) {
                        currentAccount = accounts[0];
                        updateWalletStatus(true);
                        console.log('Already connected to wallet:', currentAccount);
                        
                        // Setup listeners
                        window.ethereum.on('accountsChanged', handleAccountsChanged);
                        
                        const chainId = await window.ethereum.request({ method: 'eth_chainId' });
                        handleChainChanged(chainId);
                        
                        window.ethereum.on('chainChanged', handleChainChanged);
                    }
                } catch (error) {
                    console.error('Error checking connected accounts:', error);
                }
            }
        });
    </script>
    
    <script>
        // Optimized Space Rumble game functions
        async function setupRun() {
            // Reset game state
            window.obstacles = [];
            window.playerX = 50;
            window.playerY = canvas3.height / 2 - 25;
            window.scoreRun = 0;
            window.ongoingRun = false;
            window.armorLeft = 1;
            
            // Clear the canvas
            ctx3.clearRect(0, 0, canvas3.width, canvas3.height);
            clearScreen2();
            
            // Draw welcome screen
            ctx3.font = 'bold 36px Orbitron';
            ctx3.fillStyle = '#ff00e4';
            ctx3.textAlign = 'center';
            ctx3.textBaseline = 'middle';
            ctx3.fillText('SPACE RUMBLE', canvas3.width / 2, canvas3.height / 2 - 60);
            
            ctx3.font = '18px Orbitron';
            ctx3.fillStyle = '#00f2ff';
            ctx3.fillText('CLICK PLAY TO START', canvas3.width / 2, canvas3.height / 2);
            
            // Draw player with glow effect
            drawPlayerWithGlow(playerX, playerY);
        }

        // Draw player with neon glow effect
        function drawPlayerWithGlow(x, y) {
            // Draw glow
            ctx3.save();
            ctx3.shadowColor = '#ff00e4';
            ctx3.shadowBlur = 15;
            ctx3.drawImage(playerImage, 0, 0, playerImage.width, playerImage.height, x, y, Math.floor(3*usize/2), usize);
            ctx3.restore();
            
            // Draw player
            ctx3.drawImage(playerImage, 0, 0, playerImage.width, playerImage.height, x, y, Math.floor(3*usize/2), usize);
            
            // Draw engine flame
            ctx3.fillStyle = 'rgba(255, 122, 0, 0.8)';
            ctx3.beginPath();
            ctx3.moveTo(x, y + usize/2);
            ctx3.lineTo(x - 20, y + usize/2);
            ctx3.lineTo(x, y + usize/2 + 10);
            ctx3.lineTo(x, y + usize/2 - 10);
            ctx3.fill();
            
            // Inner flame
            ctx3.fillStyle = 'rgba(255, 230, 0, 0.9)';
            ctx3.beginPath();
            ctx3.moveTo(x, y + usize/2);
            ctx3.lineTo(x - 10, y + usize/2);
            ctx3.lineTo(x, y + usize/2 + 5);
            ctx3.lineTo(x, y + usize/2 - 5);
            ctx3.fill();
        }

        async function preloadRun(){
            if (ongoingRun){
                return;
            }
            else {
                ongoingRun = true;
                pendingScoreRun = false;
                obstacleSpeed = 7; // Faster movement for better gameplay
                frameCount = 0;
                starField = createStarField();
                await reloadRun();
            }
        }

        // Create star field for background
        function createStarField() {
            const stars = [];
            for (let i = 0; i < 150; i++) {
                stars.push({
                    x: Math.random() * canvas3.width,
                    y: Math.random() * canvas3.height,
                    size: Math.random() * 2 + 0.5,
                    speed: Math.random() * 3 + 1,
                    brightness: Math.random() * 50 + 50
                });
            }
            return stars;
        }

        // Draw the star field
        function drawStarField() {
            for (let i = 0; i < starField.length; i++) {
                const star = starField[i];
                
                // Move stars
                star.x -= star.speed;
                
                // Reset position if off screen
                if (star.x < 0) {
                    star.x = canvas3.width;
                    star.y = Math.random() * canvas3.height;
                }
                
                // Draw star with pulsing effect
                const pulse = Math.sin(frameCount * 0.05 + i) * 0.2 + 0.8;
                ctx3.fillStyle = `rgba(255, 255, 255, ${pulse * star.brightness / 100})`;
                ctx3.beginPath();
                ctx3.arc(star.x, star.y, star.size, 0, Math.PI * 2);
                ctx3.fill();
            }
        }

        // Draw explosion effect
        function drawExplosion(x, y, frame) {
            const maxRadius = 40;
            const radius = (frame / 10) * maxRadius;
            
            if (frame > 10) return false;
            
            // Outer glow
            ctx3.beginPath();
            ctx3.arc(x, y, radius, 0, Math.PI * 2);
            ctx3.fillStyle = `rgba(255, 100, 50, ${1 - frame/10})`;
            ctx3.fill();
            
            // Inner bright
            ctx3.beginPath();
            ctx3.arc(x, y, radius * 0.7, 0, Math.PI * 2);
            ctx3.fillStyle = `rgba(255, 200, 50, ${1 - frame/10})`;
            ctx3.fill();
            
            // Center white
            ctx3.beginPath();
            ctx3.arc(x, y, radius * 0.3, 0, Math.PI * 2);
            ctx3.fillStyle = `rgba(255, 255, 255, ${1 - frame/10})`;
            ctx3.fill();
            
            return true;
        }

        let explosions = [];
        let frameCount = 0;
        let starField = [];

        async function reloadRun() {
            const now = performance.now();
            frameCount++;
            
            // Only update if enough time has passed
            if (now - lastLoop >= 16.67) { // Target ~60 FPS
                lastLoop = now;
                
                // Clear the canvas
                ctx3.clearRect(0, 0, canvas3.width, canvas3.height);
                
                // Draw space background
                ctx3.fillStyle = 'black';
                ctx3.fillRect(0, 0, canvas3.width, canvas3.height);
                
                // Draw the star field
                drawStarField();
                
                // Draw HUD at the top
                ctx3.fillStyle = 'rgba(0, 0, 0, 0.7)';
                ctx3.fillRect(0, 0, canvas3.width, 40);
                
                // Draw the score
                ctx3.font = '18px Orbitron';
                ctx3.fillStyle = '#00f2ff';
                ctx3.textAlign = 'left';
                ctx3.textBaseline = 'top';
                ctx3.fillText('SCORE: ' + scoreRun, 10, 10);
                ctx3.fillText('ARMOR: ' + armorLeft, canvas3.width - 110, 10);
                
                // Draw the player
                drawPlayerWithGlow(playerX, playerY);
                
                // Draw armor effect if active
                if (armorOn) {
                    ctx3.save();
                    ctx3.globalAlpha = 0.5 + Math.sin(frameCount * 0.2) * 0.2;
                    ctx3.strokeStyle = '#ffff00';
                    ctx3.lineWidth = 2;
                    ctx3.beginPath();
                    ctx3.ellipse(playerX + usize/2 + 10, playerY + usize/2, usize * 1.2, usize * 0.7, 0, 0, Math.PI * 2);
                    ctx3.stroke();
                    ctx3.globalAlpha = 0.3;
                    ctx3.fillStyle = 'rgba(255, 255, 0, 0.3)';
                    ctx3.fill();
                    ctx3.restore();
                }
                
                // Update and draw obstacles
                for (let i = 0; i < obstacles.length; i++) {
                    obstacles[i].x -= obstacleSpeed;
                    obstacles[i].rotation = (obstacles[i].rotation || 0) + 0.02;
                    
                    // Draw asteroid with rotation
                    ctx3.save();
                    ctx3.translate(obstacles[i].x + usize/2, obstacles[i].y + usize/2);
                    ctx3.rotate(obstacles[i].rotation);
                    ctx3.drawImage(
                        obstacles[i].image, 
                        0, 0, 
                        obstacles[i].image.width, obstacles[i].image.height, 
                        -usize/2, -usize/2, 
                        usize, usize
                    );
                    ctx3.restore();
                    
                    // Collision warning indicators
                    if (obstacles[i].x <= Math.floor(usize*3) && Math.abs(playerY - obstacles[i].y) <= 100) {
                        ctx3.save();
                        ctx3.globalAlpha = 0.5 + Math.sin(frameCount * 0.3) * 0.3;
                        
                        // Draw danger warning
                        ctx3.strokeStyle = 'rgba(255, 0, 0, 0.7)';
                        ctx3.lineWidth = 2;
                        ctx3.beginPath();
                        ctx3.roundRect(obstacles[i].x - 5, obstacles[i].y, usize + 10, usize, 10);
                        ctx3.stroke();
                        
                        if (!armorOn) {
                            ctx3.strokeStyle = 'rgba(255, 0, 0, 0.5)';
                            ctx3.beginPath();
                            ctx3.roundRect(playerX - 5, playerY, usize*1.6 + 2, usize, 10);
                            ctx3.stroke();
                        }
                        ctx3.restore();
                    }
                    
                    // Check for collision with the player
                    if (checkCollisionRun(playerX, playerY, usize, usize, obstacles[i].x, obstacles[i].y, usize, usize)) {
                        if (armorOn) {
                            // If armor is on, destroy asteroid and create explosion
                            explosions.push({
                                x: obstacles[i].x + usize/2,
                                y: obstacles[i].y + usize/2,
                                frame: 0
                            });
                            obstacles.splice(i, 1);
                            i--;
                            scoreRun += 50; // Bonus for destroying with armor
                            continue;
                        } else {
                            // Game over
                            gameOver();
                            return;
                        }
                    }
                    
                    // Remove obstacles off screen
                    if (obstacles[i].x < -usize) {
                        obstacles.splice(i, 1);
                        i--;
                    }
                }
                
                // Add new obstacles
                if (Math.random() < 0.03 + (scoreRun / 20000)) { // Difficulty increases with score
                    const obstacleImage = Math.random() < 0.5 ? obstacle1Image : obstacle2Image;
                    const yPos = Math.floor(Math.random() * (canvas3.height - usize - 40) + 40); // Keep above HUD
                    obstacles.push({
                        x: canvas3.width,
                        y: yPos,
                        image: obstacleImage,
                        rotation: Math.random() * Math.PI * 2
                    });
                }
                
                // Update and draw explosions
                for (let i = 0; i < explosions.length; i++) {
                    explosions[i].frame++;
                    const active = drawExplosion(explosions[i].x, explosions[i].y, explosions[i].frame);
                    if (!active) {
                        explosions.splice(i, 1);
                        i--;
                    }
                }
                
                // Check armor timeout
                if (Date.now() - armorStart >= 3000) {
                    armorOn = false;
                }
                
                // Add armor powerup occasionally
                if (scoreRun > 0 && scoreRun % 1000 === 0 && !armorPowerupActive && Math.random() < 0.3) {
                    armorPowerupActive = true;
                    armorPowerupX = canvas3.width;
                    armorPowerupY = Math.random() * (canvas3.height - 40 - 30) + 40;
                }
                
                // Draw armor powerup
                if (armorPowerupActive) {
                    armorPowerupX -= 5;
                    
                    ctx3.save();
                    ctx3.globalAlpha = 0.5 + Math.sin(frameCount * 0.2) * 0.3;
                    ctx3.fillStyle = '#ffff00';
                    ctx3.beginPath();
                    ctx3.arc(armorPowerupX, armorPowerupY, 15, 0, Math.PI * 2);
                    ctx3.fill();
                    
                    // Draw shield icon
                    ctx3.fillStyle = '#000';
                    ctx3.beginPath();
                    ctx3.moveTo(armorPowerupX, armorPowerupY - 5);
                    ctx3.lineTo(armorPowerupX - 5, armorPowerupY + 5);
                    ctx3.lineTo(armorPowerupX + 5, armorPowerupY + 5);
                    ctx3.closePath();
                    ctx3.fill();
                    ctx3.restore();
                    
                    // Check for collision with player
                    if (checkCollisionRun(playerX, playerY, usize, usize, armorPowerupX - 15, armorPowerupY - 15, 30, 30)) {
                        armorOn = true;
                        armorStart = Date.now();
                        armorLeft++;
                        armorPowerupActive = false;
                        
                        // Visual effect for powerup collection
                        ctx3.save();
                        ctx3.globalAlpha = 0.8;
                        ctx3.fillStyle = '#ffff00';
                        ctx3.beginPath();
                        ctx3.arc(playerX + usize/2, playerY + usize/2, 50, 0, Math.PI * 2);
                        ctx3.fill();
                        ctx3.restore();
                    }
                    
                    // Remove if off screen
                    if (armorPowerupX < -30) {
                        armorPowerupActive = false;
                    }
                }
                
                // Update the score with better progression
                scoreRun = scoreRun + 1;
            }
            
            // Only continue if game is ongoing
            if (ongoingRun) {
                requestAnimationFrame(reloadRun);
            }
        }

        function gameOver() {
            // Game over screen
            ctx3.fillStyle = 'rgba(0, 0, 0, 0.8)';
            ctx3.fillRect(0, 0, canvas3.width, canvas3.height);
            
            // Draw game over text with neon effect
            ctx3.save();
            ctx3.shadowColor = '#ff00e4';
            ctx3.shadowBlur = 15;
            ctx3.font = 'bold 48px Orbitron';
            ctx3.fillStyle = '#ff00e4';
            ctx3.textAlign = 'center';
            ctx3.textBaseline = 'middle';
            ctx3.fillText('GAME OVER', canvas3.width / 2, canvas3.height / 2 - 50);
            ctx3.restore();
            
            ctx3.font = '28px Orbitron';
            ctx3.fillStyle = '#00f2ff';
            ctx3.fillText('SCORE: ' + scoreRun, canvas3.width / 2, canvas3.height / 2);
            
            ctx3.font = '20px Orbitron';
            ctx3.fillStyle = '#ffffff';
            ctx3.fillText('PRESS RETRY TO PLAY AGAIN', canvas3.width / 2, canvas3.height / 2 + 50);
            
            // Cleanup
            obstacles = [];
            scoreRec = scoreRun;
            scoreRun = 0;
            armorOn = false;
            armorStart = 0;
            armorLeft = 1;
            ongoingRun = false;
            pendingScoreRun = true;
        }

        function restartRun(){
            setupRun();
            setTimeout(() => {
                preloadRun();
            }, 500);
        }

        let armorPowerupActive = false;
        let armorPowerupX = 0;
        let armorPowerupY = 0;
        
        // Export functions to window
        window.setupRun = setupRun;
        window.preloadRun = preloadRun;
        window.reloadRun = reloadRun;
        window.restartRun = restartRun;
        
        // Helper functions for UI integration
        function to_rules() {
           showRules();
        }
        window.to_rules = to_rules;
        
        function to_scores() {
           showScores();
        }
        window.to_scores = to_scores;
    </script>
</body>
</html>
